<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Conta - Peda√ßo do C√©u</title>
    <link rel="icon" href="assets/favicon.ico.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="/public/perfil.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <a href="index.html" class="logo">
                <div class="logo-text">
                    <h1>Peda√ßo do C√©u</h1>
                </div>
            </a>
            <div class="cart-icon" onclick="toggleCart()">
                <span class="cart-count">0</span>
                Ver sacola
            </div>
        </div>
    </header>

    <!-- Perfil -->
    <div class="perfil-container">
        <!-- Sidebar -->
        <aside class="perfil-sidebar">
            <div class="perfil-user-header">
                <img id="user-avatar" src="assets/avatar-default.png" alt="Avatar">
                <div>
                    <h3 id="user-name-sidebar">Carregando...</h3>
                    <p id="user-email-sidebar">...</p>
                </div>
            </div>

            <nav class="perfil-nav">
                <a href="#dados" class="perfil-nav-item active" onclick="showTab('dados')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    Meus Dados
                </a>
                <a href="#endereco" class="perfil-nav-item" onclick="showTab('endereco')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    Endere√ßo
                </a>
                <a href="#pedidos" class="perfil-nav-item" onclick="showTab('pedidos')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                    Meus Pedidos
                </a>
            </nav>

            <button class="btn-logout" onclick="window.firebaseAuth.logout()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
                Sair
            </button>
        </aside>

        <!-- Conte√∫do -->
        <main class="perfil-content">
            
            <!-- Aba: Meus Dados -->
            <div id="tab-dados" class="perfil-tab active">
                <h2>Informa√ß√µes Pessoais</h2>
                
                <div class="perfil-card">
                    <div class="perfil-info-item">
                        <label>Nome Completo</label>
                        <p id="user-name">Carregando...</p>
                    </div>

                    <div class="perfil-info-item">
                        <label>Email</label>
                        <p id="user-email">...</p>
                    </div>

                    <div class="perfil-info-item">
                        <label>Telefone</label>
                        <p id="user-phone">N√£o cadastrado</p>
                    </div>

                    <div class="perfil-info-item">
                        <label>Membro desde</label>
                        <p id="user-created">...</p>
                    </div>
                </div>

                <p class="perfil-note">
                    üí° <strong>Dica:</strong> Para alterar seu nome ou email, acesse as configura√ß√µes da sua conta Google.
                </p>
            </div>

            <!-- Aba: Endere√ßo -->
            <div id="tab-endereco" class="perfil-tab">
                <h2>Gerenciar Endere√ßo</h2>
                
                <div class="perfil-card">
                    <form id="form-endereco" class="form-endereco">
                        
                        <div class="form-group">
                            <label for="phone-endereco">Telefone/WhatsApp *</label>
                            <input type="tel" id="phone-endereco" name="phone" required placeholder="(00) 00000-0000">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="cep-endereco">CEP *</label>
                                <input type="text" id="cep-endereco" name="cep" required placeholder="00000-000" maxlength="9">
                            </div>
                            <div class="form-group">
                                <label for="street-endereco">Rua *</label>
                                <input type="text" id="street-endereco" name="street" required placeholder="Nome da rua">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group form-small">
                                <label for="number-endereco">N√∫mero *</label>
                                <input type="text" id="number-endereco" name="number" required placeholder="123">
                            </div>
                            <div class="form-group">
                                <label for="complement-endereco">Complemento</label>
                                <input type="text" id="complement-endereco" name="complement" placeholder="Apto, Bloco...">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="neighborhood-endereco">Bairro *</label>
                                <input type="text" id="neighborhood-endereco" name="neighborhood" required placeholder="Nome do bairro">
                            </div>
                            <div class="form-group">
                                <label for="city-endereco">Cidade *</label>
                                <input type="text" id="city-endereco" name="city" required placeholder="Nome da cidade">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="state-endereco">Estado *</label>
                            <select id="state-endereco" name="state" required>
                                <option value="">Selecione o estado</option>
                                <option value="AC">Acre</option>
                                <option value="AL">Alagoas</option>
                                <option value="AP">Amap√°</option>
                                <option value="AM">Amazonas</option>
                                <option value="BA">Bahia</option>
                                <option value="CE">Cear√°</option>
                                <option value="DF">Distrito Federal</option>
                                <option value="ES">Esp√≠rito Santo</option>
                                <option value="GO">Goi√°s</option>
                                <option value="MA">Maranh√£o</option>
                                <option value="MT">Mato Grosso</option>
                                <option value="MS">Mato Grosso do Sul</option>
                                <option value="MG">Minas Gerais</option>
                                <option value="PA">Par√°</option>
                                <option value="PB">Para√≠ba</option>
                                <option value="PR">Paran√°</option>
                                <option value="PE">Pernambuco</option>
                                <option value="PI">Piau√≠</option>
                                <option value="RJ">Rio de Janeiro</option>
                                <option value="RN">Rio Grande do Norte</option>
                                <option value="RS">Rio Grande do Sul</option>
                                <option value="RO">Rond√¥nia</option>
                                <option value="RR">Roraima</option>
                                <option value="SC">Santa Catarina</option>
                                <option value="SP">S√£o Paulo</option>
                                <option value="SE">Sergipe</option>
                                <option value="TO">Tocantins</option>
                            </select>
                        </div>

                        <button type="submit" class="btn-save">
                            Salvar Endere√ßo
                        </button>
                    </form>

                    <p class="perfil-note">
                        üí° Este endere√ßo ser√° usado automaticamente no checkout.
                    </p>
                </div>
            </div>

            <!-- Aba: Meus Pedidos -->
            <div id="tab-pedidos" class="perfil-tab">
                <h2>Hist√≥rico de Pedidos</h2>
                
                <div id="pedidos-list" class="pedidos-list">
                    <div class="loading">Carregando pedidos...</div>
                </div>
            </div>

        </main>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/firebase-auth.js"></script>
    <script src="js/perfil.js"></script>
    <script src="script.js"></script>
</body>
</html>